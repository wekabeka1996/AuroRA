# CI Thresholds Configuration - New Format (v1)
# Generated by derive_ci_thresholds.py and processed by ci_ratchet.py

thresholds:
  alpha_target: 0.10
  coverage_tolerance: 0.03
  coverage_ema_tolerance: 0.03
  ctr_min: 0.95
  dcts_min: 0.90
  max_churn_per_1k: 25
  max_exec_block_rate: 0.40
  tau_drift_ema_max: 0.02

meta:
  generation_time: "2025-08-16T14:30:00Z"
  window_size: 7
  var_ratio_rb: 0.75
  derive_version: "v1.2.0"

hard_meta:
  schema_version: 1
  window_n: 42
  warn_rate_k: 0.23
  p95_p10_delta: 0.15
  var_ratio_rb: 0.8
  hard_candidate:
    dcts_min: true
    max_churn_per_1k: false
    ctr_min: true
  reasons:
    dcts_min: "stability_ok,sample_ok,drift_low"
    max_churn_per_1k: "high_variance,insufficient_samples"
    ctr_min: "stability_marginal,sample_ok"
  decided_by: "hard_enable_decider"
  timestamp: "2025-08-16T14:30:00Z"
  
  # Hard-enabled thresholds
  dcts_min:
    hard_enabled: true
    hard_reason: "stability_ok,sample_ok,drift_low"

metric_meta:
  dcts_min:
    p95: 0.92
    p10: 0.88
    delta: 0.04
    hard_candidate: true
    sample_count: 45
  max_churn_per_1k:
    p95: 28.5
    p10: 18.2
    delta: 10.3
    hard_candidate: false
    sample_count: 38

ratchet_meta:
  applied_at: "2025-08-16T15:00:00Z"
  max_step: 0.05
  decisions:
    dcts_min: "adopted"
    max_churn_per_1k: "clamped"
    ctr_min: "unchanged"