{
  "id": null,
  "title": "AURORA RC \u2192 GA Monitoring",
  "description": "Observability dashboard for AURORA RC to GA transition",
  "tags": [
    "aurora",
    "rc",
    "ga",
    "monitoring"
  ],
  "timezone": "browser",
  "editable": true,
  "graphTooltip": 1,
  "time": {
    "from": "now-24h",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ],
    "time_options": [
      "5m",
      "15m",
      "1h",
      "6h",
      "12h",
      "24h",
      "2d",
      "7d",
      "30d"
    ]
  },
  "templating": {
    "list": [
      {
        "name": "environment",
        "type": "custom",
        "options": [
          {
            "text": "staging",
            "value": "staging",
            "selected": true
          },
          {
            "text": "production",
            "value": "production",
            "selected": false
          },
          {
            "text": "canary",
            "value": "canary",
            "selected": false
          }
        ],
        "current": {
          "text": "staging",
          "value": "staging"
        }
      },
      {
        "name": "config_profile",
        "type": "custom",
        "options": [
          {
            "text": "r2",
            "value": "r2",
            "selected": true
          },
          {
            "text": "smoke",
            "value": "smoke",
            "selected": false
          }
        ],
        "current": {
          "text": "r2",
          "value": "r2"
        }
      }
    ]
  },
  "annotations": {
    "list": [
      {
        "name": "Deployments",
        "datasource": "prometheus",
        "expr": "aurora_deployment_event",
        "iconColor": "green",
        "textFormat": "Deployment: {{version}}"
      },
      {
        "name": "Canary Tests",
        "datasource": "prometheus",
        "expr": "aurora_canary_test_started",
        "iconColor": "blue",
        "textFormat": "Canary: {{test_id}}"
      }
    ]
  },
  "panels": [
    {
      "id": 1,
      "title": "GA Gates Status",
      "type": "stat",
      "targets": [
        {
          "expr": "aurora_ga_gate_main_loop_started_ratio",
          "legendFormat": "Main Loop Started",
          "refId": "A"
        },
        {
          "expr": "aurora_ga_gate_decisions_per_run",
          "legendFormat": "Decisions/Run",
          "refId": "B"
        },
        {
          "expr": "aurora_ga_gate_preloop_exit_ratio",
          "legendFormat": "Preloop Exit %",
          "refId": "C"
        },
        {
          "expr": "aurora_ga_gate_noop_ratio_mean",
          "legendFormat": "NOOP Ratio",
          "refId": "D"
        },
        {
          "expr": "aurora_ga_gate_zero_budget_count",
          "legendFormat": "Zero Budget",
          "refId": "E"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "steps": [
              {
                "color": "red",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 0.8
              },
              {
                "color": "green",
                "value": 0.95
              }
            ]
          },
          "unit": "percentunit"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 0
      }
    },
    {
      "id": 2,
      "title": "Preloop Statistics",
      "type": "timeseries",
      "targets": [
        {
          "expr": "aurora_preloop_runs_total",
          "legendFormat": "Total Runs",
          "refId": "A"
        },
        {
          "expr": "aurora_preloop_successful_runs",
          "legendFormat": "Successful Runs",
          "refId": "B"
        },
        {
          "expr": "aurora_preloop_exit_rate_exit",
          "legendFormat": "Exit Rate",
          "refId": "C"
        },
        {
          "expr": "aurora_preloop_exit_rate_timeout",
          "legendFormat": "Timeout Rate",
          "refId": "D"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "fillOpacity": 10
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 8
      }
    },
    {
      "id": 3,
      "title": "Main Loop Performance",
      "type": "timeseries",
      "targets": [
        {
          "expr": "aurora_main_loop_decisions_total",
          "legendFormat": "Total Decisions",
          "refId": "A"
        },
        {
          "expr": "aurora_main_loop_execution_decisions",
          "legendFormat": "Execution Decisions",
          "refId": "B"
        },
        {
          "expr": "aurora_main_loop_noop_ratio",
          "legendFormat": "NOOP Ratio",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "linear"
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 8
      }
    },
    {
      "id": 4,
      "title": "Canary Deployment Health",
      "type": "table",
      "targets": [
        {
          "expr": "aurora_canary_test_success_rate",
          "legendFormat": "Success Rate",
          "refId": "A"
        },
        {
          "expr": "aurora_canary_test_health_rate",
          "legendFormat": "Health Rate",
          "refId": "B"
        },
        {
          "expr": "aurora_canary_tests_total",
          "legendFormat": "Total Tests",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "displayMode": "basic",
            "inspect": false
          },
          "thresholds": {
            "steps": [
              {
                "color": "red",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 0.67
              },
              {
                "color": "green",
                "value": 0.9
              }
            ]
          }
        }
      },
      "gridPos": {
        "h": 6,
        "w": 24,
        "x": 0,
        "y": 16
      }
    },
    {
      "id": 5,
      "title": "System Resources",
      "type": "timeseries",
      "targets": [
        {
          "expr": "aurora_memory_usage_mb",
          "legendFormat": "Memory (MB)",
          "refId": "A"
        },
        {
          "expr": "aurora_cpu_usage_percent",
          "legendFormat": "CPU %",
          "refId": "B"
        },
        {
          "expr": "aurora_run_duration_seconds",
          "legendFormat": "Run Duration (s)",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "linear"
          },
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 22
      }
    },
    {
      "id": 6,
      "title": "Error & Warning Tracking",
      "type": "logs",
      "targets": [
        {
          "expr": "{job=\"aurora\"} |= \"ERROR\"",
          "legendFormat": "Errors",
          "refId": "A"
        },
        {
          "expr": "{job=\"aurora\"} |= \"WARNING\"",
          "legendFormat": "Warnings",
          "refId": "B"
        }
      ],
      "options": {
        "showTime": true,
        "showLabels": false,
        "showCommonLabels": false,
        "wrapLogMessage": false,
        "prettifyLogMessage": false,
        "enableLogDetails": true,
        "dedupStrategy": "none",
        "sortOrder": "Descending"
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 12,
        "y": 22
      }
    }
  ],
  "refresh": "30s",
  "schemaVersion": 30,
  "version": 1
}